(()=>{function a(t){if(!t)return"\u2014";try{return new Date(t).toLocaleString("vi-VN")}catch{return"\u2014"}}function c({enableNotif:t,notified_date:o,lastPoll:e}){$("#notifState").toggleClass("on",t!==!1).toggleClass("off",t===!1).text(t===!1?"T\u1EAFt":"B\u1EADt"),$("#enableNotif").prop("checked",t!==!1);let i=new Date().toISOString().split("T")[0];$("#notifiedToday").text(o===i?"\u0110\xE3 b\xE1o":"Ch\u01B0a"),$("#lastPollAt").text(a(e==null?void 0:e.time)),$("#lastTotal").text(typeof(e==null?void 0:e.total)=="number"?e.total.toLocaleString("vi-VN"):"\u2014")}async function n(){chrome.runtime.sendMessage({type:"getSettings"},t=>{c(t||{})})}$(function(){n(),$("#enableNotif").on("change",function(){let t=this.checked;chrome.runtime.sendMessage({type:"setEnableNotif",value:t},()=>n())}),$("#btnPollNow").on("click",function(){$(this).prop("disabled",!0).text("\u23F3 \u0110ang ki\u1EC3m tra..."),chrome.runtime.sendMessage({type:"manualPoll"},t=>{setTimeout(()=>{n(),$("#btnPollNow").prop("disabled",!1).text("\u{1F504} Ki\u1EC3m tra ngay")},800)})})});})();
